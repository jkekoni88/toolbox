* { box-sizing: border-box; }
html, body { margin:0; height:100%; }
body {
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Arial, sans-serif;
  background: #111827;
  color: #f9fafb;
  position: relative;
  overflow-x: hidden;
}

body::before,
body::after {
  content: "";
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 0;
}

body::before {
  background:
    radial-gradient(circle at top left, rgba(170, 10, 10, 0.96) 0%, rgba(140, 5, 5, 0.88) 18%, rgba(45, 0, 0, 0.5) 40%, rgba(30, 0, 0, 0) 65%),
    radial-gradient(circle at bottom right, rgba(14, 24, 120, 0.85) 0%, rgba(30, 0, 0, 0.65) 32%, rgba(30, 0, 0, 0) 62%);
  filter: blur(90px);
  opacity: 0.9;
}

body::after {
  background:
    radial-gradient(circle at center, rgba(30, 0, 0, 0.8) 0%, rgba(30, 0, 0, 0.7) 55%, rgba(17, 24, 39, 0.4) 75%);
  filter: blur(200px);
  opacity: 0.85;
}

body > * {
  position: relative;
  z-index: 1;
}
#brandbar{
  position:sticky;
  top:0;
  z-index:3;
  display:flex;
  align-items:center;
  gap:12px;
  padding:10px 14px;
  color:#fff;
  border-bottom:1px solid rgba(148,163,184,0.25);
}
#brandbar .brand{
  font-weight:700;
  letter-spacing:.3px;
  display:flex;
  align-items:center;
}
#brandbar .nav{
  display:flex;
  align-items:center;
  gap:10px;
  margin-left:10px;
  flex-wrap:wrap;
}
#brandbar .nav a{
  color:#d1d5db; text-decoration:none; padding:6px 10px; font-size:13px;
  border:none;
  background:none;
  box-shadow:0 22px 48px -30px rgba(220,38,38,0.55);
  border-radius:0;
  transition:color .2s ease;
}
#brandbar .nav a:hover{
  color:#f8fafc;
}
#brandbar .nav a.active{
  color:#f8fafc;
  border:1px solid rgba(248,113,113,0.6);
  border-radius:10px;
  background: linear-gradient(0deg, rgba(91, 4, 4, 0.92) 0%, rgba(169, 1, 17, 0.9) 68%, rgba(211, 0, 25, 0.85) 100%);
  box-shadow:0 22px 48px -30px rgba(220,38,38,0.55);
}
#brandbar .nav-info{
  margin-left:auto;
  font-size:12px;
  color:#9ca3af;
  text-align:right;
  line-height:1.4;
}

/* Layout */
#app{display:flex;min-height:calc(100vh - 44px)}

/* Sivupalkki oikealla */
#sidebar{
  width:clamp(300px, 35vw, 600px);
  
  border-left:1px solid #1f2937; /* oikea reuna */
  border-right:none;
  padding:12px;
  display:flex;flex-direction:column;gap:10px;overflow:auto;
  order:2;
}
#sidebar h2{margin:4px 0 8px;font-size:16px;color:#e5e7eb}
.import-box{display:flex;flex-direction:column;gap:8px;margin-bottom:6px}
.hint{margin:0;color:#94a3b8;font-size:12px}
.warn{
  margin:0;color:#fcd34d;
  border:1px solid #b45309;padding:6px 8px;border-radius:6px;font-size:12px
}

/* Kehyslista */
.thumbs{display:grid;grid-template-columns:repeat(2,1fr);gap:8px}
.frame-item{
  display:flex;flex-direction:column;gap:4px;padding:6px;
  border:1px solid #1f2937;border-radius:8px;
   cursor:pointer; transition:.15s
}
.frame-item:hover{box-shadow:0 22px 48px -30px rgba(220,38,38,0.55);
  background: linear-gradient(0deg, rgba(91, 4, 4, 0.92) 0%, rgba(169, 1, 17, 0.9) 68%, rgba(211, 0, 25, 0.85) 100%);
  box-shadow:0 22px 48px -30px rgba(220,38,38,0.55);
}
.frame-thumb-wrap{ max-width:120px; margin:0 auto; }
.frame-thumb{width:100%;aspect-ratio:16/9;border-radius:6px;display:block}
.frame-caption{text-align:center;font-size:11px;color:#cbd5e1}

/* Main / toolbar */
#main{flex:1;display:flex;flex-direction:column;order:1}
.toolbar{
  display:flex;align-items:center;gap:6px;flex-wrap:wrap;
  padding:8px 10px;border-bottom:1px solid #1f2937;
   position:sticky; top:0; z-index:2
}

/* Napit */
.file-btn{
  position:relative;overflow:hidden;
  padding:6px 10px;border-radius:8px;
  cursor:pointer;font-size:13px;
}
.file-btn input{position:absolute;inset:0;opacity:0;cursor:pointer}

button{border:none;border-radius:8px;padding:6px 10px;font-size:13px;cursor:pointer}
button:disabled{opacity:.5;cursor:not-allowed}

/* Punaiset yhten√§iset napit */
.btn-danger, .file-btn.btn-danger{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  gap:8px;
  padding:10px 20px;
  font-weight:600;
  font-size:14px;
  letter-spacing:0.05em;
  text-transform:uppercase;
  background: linear-gradient(0deg, rgba(91, 4, 4, 0.92) 0%, rgba(169, 1, 17, 0.9) 68%, rgba(211, 0, 25, 0.85) 100%);
  color:#f8fafc;
  border:1px solid rgba(248,113,113,0.6);
  transition:background .2s ease, border-color .2s ease, transform .2s ease, box-shadow .2s ease;
  box-shadow:0 22px 48px -30px rgba(220,38,38,0.55);
}
.btn-danger.small,
.file-btn.btn-danger.small{
  padding:8px 16px;
  font-size:12px;
  border-radius:10px;
}
.btn-danger:hover, .file-btn.btn-danger:hover{
  background: linear-gradient(0deg, rgba(91, 4, 4, 0.92) 0%, rgba(169, 1, 17, 0.9) 68%, rgba(211, 0, 25, 0.85) 100%);
  border-color:rgba(148,163,184,0.55);
  box-shadow:0 22px 48px -30px rgba(220,38,38,0.55);
  transform:translateY(-2px);
}

#downloadBtn,
#downloadBaseBtn{
  
  color:#fff;
  border:1px solid rgba(248,113,113,0.6);
  box-shadow:0 22px 48px -30px rgba(220,38,38,0.55);
}
#downloadBtn:hover,
#downloadBaseBtn:hover{
  
  border-color:#dc2626;
  transform:translateY(-1px);
}

/* Divider */
.divider{
  width:1px; height:24px;
  
  margin:0 6px;
  align-self:center;
}

/* Canvas */
#canvasWrap{display:flex;flex-direction:column;align-items:center;gap:6px;padding:12px}
#previewCanvas{
  width:960px;height:540px;
   /* kirkkaan punainen tausta */
  border-radius:8px;border:1px solid #e5e7eb;touch-action:none
}
#hint{margin:0;color:#94a3b8;font-size:12px}

/* Controls */
.controls{padding:0 12px 12px}
.panel{
   border:1px solid #1f2937; border-radius:8px; overflow:hidden
}
.panel-header{
  display:flex;justify-content:space-between;align-items:center;
  padding:6px 10px;border-bottom:1px solid #1f2937;font-size:13px;color:#e5e7eb
}
.panel-header h3{margin:0;font-size:13px}
.controls-grid{display:grid;grid-template-columns:repeat(4,minmax(180px,1fr));gap:10px;padding:10px}
.card{
  border:1px solid #1f2937;border-radius:6px;padding:8px;
  display:flex;flex-direction:column;gap:4px
}
.card-title{font-weight:600;font-size:12px;margin-bottom:2px;color:#e5e7eb}
label{font-size:12px;color:#cbd5e1}
input[type=range]{
  width:100%;
  margin:2px 0;
  --kg-range-track-height:8px;
  --kg-range-thumb-size:18px;
  --kg-range-fill:rgba(211, 29, 45, 0.85);
  --kg-range-track:rgba(15, 23, 42, 0.85);
  --kg-range-thumb:#f97373;
  --kg-range-value:50%;
  accent-color:#ef4444;
  height:var(--kg-range-track-height);
  border-radius:999px;
  border:none;
  outline:none;
  background:linear-gradient(
    to right,
    var(--kg-range-fill) 0,
    var(--kg-range-fill) var(--kg-range-value),
    var(--kg-range-track) var(--kg-range-value),
    var(--kg-range-track) 100%
  );
  cursor:pointer;
  -webkit-appearance:none;
  appearance:none;
  transition:background 0.15s ease;
}
input[type=range]:focus-visible{
  box-shadow:0 0 0 2px rgba(248,113,113,0.35);
}
input[type=range]::-webkit-slider-runnable-track{
  height:100%;
  background:transparent;
}
input[type=range]::-webkit-slider-thumb{
  -webkit-appearance:none;
  width:var(--kg-range-thumb-size);
  height:var(--kg-range-thumb-size);
  border-radius:50%;
  border:2px solid rgba(248,113,113,0.75);
  background:radial-gradient(circle at 30% 30%, #fca5a5 0%, #f87171 45%, #dc2626 100%);
  box-shadow:0 2px 6px rgba(220,38,38,0.45), 0 0 0 1px rgba(120,10,10,0.5);
  margin-top:calc((var(--kg-range-thumb-size) - var(--kg-range-track-height))/-2);
  transition:transform 0.2s ease, box-shadow 0.2s ease;
}
input[type=range]:active::-webkit-slider-thumb{
  transform:scale(1.05);
  box-shadow:0 4px 10px rgba(220,38,38,0.6), 0 0 0 1px rgba(120,10,10,0.65);
}
input[type=range]::-moz-range-track{
  height:var(--kg-range-track-height);
  border-radius:999px;
  background:var(--kg-range-track);
}
input[type=range]::-moz-range-progress{
  height:var(--kg-range-track-height);
  border-radius:999px;
  background:var(--kg-range-fill);
}
input[type=range]::-moz-range-thumb{
  width:var(--kg-range-thumb-size);
  height:var(--kg-range-thumb-size);
  border-radius:50%;
  border:2px solid rgba(248,113,113,0.75);
  background:radial-gradient(circle at 30% 30%, #fca5a5 0%, #f87171 45%, #dc2626 100%);
  box-shadow:0 2px 6px rgba(220,38,38,0.45), 0 0 0 1px rgba(120,10,10,0.5);
  cursor:pointer;
  transition:transform 0.2s ease, box-shadow 0.2s ease;
}
input[type=range]:active::-moz-range-thumb{
  transform:scale(1.05);
  box-shadow:0 4px 10px rgba(220,38,38,0.6), 0 0 0 1px rgba(120,10,10,0.65);
}
select{
  height:32px;
  border-radius:8px;
  border:1px solid rgba(248,113,113,0.45);
  color:#e5e7eb;
  padding:6px 32px 6px 10px;
  font-size:12px;
  background:
    linear-gradient(180deg, rgba(15, 23, 42, 0.95) 0%, rgba(10, 16, 28, 0.9) 100%),
    linear-gradient(90deg, rgba(248, 113, 113, 0.55), rgba(248, 113, 113, 0.35)),
    url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='%23f87272' viewBox='0 0 12 8'%3E%3Cpath d='M1.41 0L6 4.58 10.59 0 12 1.41 6 7.41 0 1.41z'/%3E%3C/svg%3E");
  background-repeat:no-repeat, no-repeat, no-repeat;
  background-position:center, center, right 10px center;
  background-size:cover, cover, 12px;
  box-shadow:inset 0 1px 2px rgba(15,15,30,0.45);
  appearance:none;
  -webkit-appearance:none;
  cursor:pointer;
  position:relative;
}
select:focus-visible{
  outline:none;
  border-color:rgba(248,113,113,0.8);
  box-shadow:0 0 0 2px rgba(248,113,113,0.25), inset 0 1px 2px rgba(15,15,30,0.45);
  background:
    linear-gradient(180deg, rgba(24, 33, 56, 0.95) 0%, rgba(15, 23, 42, 0.95) 100%),
    linear-gradient(90deg, rgba(248, 113, 113, 0.6), rgba(248, 113, 113, 0.35));
}
select option,
select optgroup{
  background-color:#111827;
  color:#f8fafc;
}
.range-readout{font-size:11px;color:#9ca3af}
.checkbox{display:flex;align-items:center;font-size:12px;gap:6px;color:#e5e7eb}
.chiprow{display:flex;flex-wrap:wrap;gap:6px}
.chip{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  padding:6px 14px;
  font-size:11px;
  font-weight:600;
  letter-spacing:0.04em;
  border-radius:999px;
  border:1px solid rgba(248,113,113,0.45);
  color:#f1f5f9;
  cursor:pointer;
  background:linear-gradient(180deg, rgba(45, 7, 12, 0.92) 0%, rgba(22, 10, 18, 0.9) 100%);
  box-shadow:0 16px 32px -24px rgba(220,38,38,0.5);
  transition:transform 0.2s ease, box-shadow 0.2s ease, filter 0.2s ease, border-color 0.2s ease;
}
.chip:hover{
  transform:translateY(-1px);
  filter:brightness(1.05);
  border-color:rgba(248,113,113,0.7);
  box-shadow:0 22px 48px -28px rgba(220,38,38,0.6);
}
.chip.active{
  background: linear-gradient(0deg, rgba(91, 4, 4, 0.92) 0%, rgba(169, 1, 17, 0.9) 68%, rgba(211, 0, 25, 0.85) 100%);
  color:#f8fafc;
  border-color:rgba(248,113,113,0.8);
  box-shadow:0 28px 56px -26px rgba(220,38,38,0.68);
}
.subhint{font-size:11px;color:#94a3b8}

/* Responsiivisuus */
@media(max-width:1600px){.controls-grid{grid-template-columns:repeat(3,minmax(180px,1fr))}}
@media(max-width:1200px){.controls-grid{grid-template-columns:repeat(2,minmax(180px,1fr))}}
@media(max-width:800px){.controls-grid{grid-template-columns:1fr}}
@media(max-width:1100px){#previewCanvas{width:100%;height:auto}}






















